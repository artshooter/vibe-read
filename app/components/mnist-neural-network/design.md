# MNIST 神经网络设计文档

## 1. 内容理解

**主题**：手写数字识别 - 从零手撸神经网络
**核心内容**：
- 解释神经网络如何识别手写数字（卷积层 → 激活函数层 → 全连接层）
- 解释如何训练模型（损失函数 → 梯度 → 优化器）
- 大量数学公式和矩阵运算
- 技术教程性质，目标是让读者理解原理

**情绪基调**：理性、逻辑、教育性，但也有探索和发现的乐趣
**目标读者**：对机器学习感兴趣、想理解底层原理的学习者

## 2. 设计直觉

**第一感受**：
- 像在现代终端（VS Code / iTerm2）里运行代码、调试程序
- 矩阵在流动、变换，数据在层与层之间传递
- 有种"开发者/极客"的感觉 - 用最直观的方式揭开神经网络的原理
- 命令行的简洁美学 - 没有花哨装饰，专注于内容逻辑

**脑海中的画面**：
- **颜色**：深色但舒适的背景，白色主文字 + 彩色语法高亮，像在现代 IDE 的终端
- **形状**：Unicode/ASCII 字符绘制的矩阵边框、箭头用 `->` 或 `→` 表示、层级用缩进表示
- **动态**：文字逐字出现（打字机效果）、光标闪烁、数据逐行打印

**希望读者的体验**：
- 平静但专注的状态
- 阅读节奏适中，可以停下来思考
- 能看到抽象概念的具象化

## 3. 设计方案

### 3.1 视觉风格 - 现代终端美学

**色彩系统**（参考现代终端主题，如 One Dark / Dracula）：
- **主背景**：深色但不刺眼（#1a1a1a 或 #1e1e2e）
- **正文文字**：浅灰白色（#e5e7eb）- 主要阅读内容，舒适易读
- **标题文字**：纯白色（#ffffff）- 清晰醒目
- **命令提示符**：终端绿（#50fa7b）- 标记命令行
- **代码/矩阵边框**：青色（#8be9fd）- 技术感，区分内容块
- **高亮/强调**：黄色（#f1fa8c）- 关键数值、计算结果
- **注释/说明**：暗灰色（#6272a4）- 辅助信息
- **交互元素**：绿色（#50fa7b）- 按钮、可点击元素
- **警告**：橙色（#ffb86c）
- **错误**：红色（#ff5555）

**配色原则**：
- 正文用白/浅灰保证可读性
- 用颜色区分内容类型（命令、代码、结果、注释）
- 保持克制，不过度使用颜色

**字体**：
- 全局统一：等宽字体（monospace）
  - 优先级：JetBrains Mono > Fira Code > SF Mono > Consolas > Monaco
- 所有文字（包括标题、正文、公式）都使用等宽字体
- 字号：15-16px（正文），20-28px（标题）
- 行高：1.6-1.8（确保舒适阅读）

**视觉元素**：
- **命令行提示符**：`$`、`>`、`#` 用绿色标记章节
- **光标闪烁**：白色或绿色方块，在关键位置
- **ASCII 边框**：用 `┌─┐ │ └─┘` 或 `+---+` 绘制矩阵和表格（青色）
- **代码块背景**：略深于主背景（#0d0d0d）- 区分代码区域
- **subtle 扫描线**（可选）：非常淡，不影响阅读
- **行号**（对于代码块）：暗灰色

**风格关键词**：现代终端、开发者友好、专业、易读、Geek

### 3.2 交互设计 - 终端式交互

**核心交互点**：

1. **卷积层可视化**（最重要！）
   - ASCII 艺术风格的矩阵显示
   ```
   $ ./convolution --input digit7.png --kernel horizontal

   Processing...

   Input Matrix:        Kernel:           Output:
   +---+---+---+        +---+---+---+     +---+---+---+
   | 1 | 1 | 1 | ──┐    | 1 | 1 | 1 |     | 3 | 2 | 1 |
   | 0 | 0 | 1 |   │    | 0 | 0 | 0 |     | 1 | 1 | 1 |
   | 0 | 0 | 1 |   └──> |-1 |-1 |-1 | =>  | 1 | 1 | 1 |
   +---+---+---+        +---+---+---+     +---+---+---+
   ```
   - 用户点击"下一步"按钮，矩阵逐步计算（类似命令行逐行输出）
   - 计算步骤用绿色高亮显示，像终端输出

2. **激活函数演示**
   - 终端输出风格的函数调用
   ```
   $ ./activate --function ReLU --input matrix_1.txt

   > ReLU(x) = max(0, x)
   > Processing matrix...

   [ 3  2  1]    ->    [ 3  2  1]
   [ 1  1  1]    ->    [ 1  1  1]
   [-1 -1 -1]    ->    [ 0  0  0]
   ```
   - 用户可以切换不同激活函数（像切换命令参数）

3. **全连接层计算器**
   - 命令行式的计算展示
   ```
   $ ./classify --weights W0 --input features.txt

   Computing score for digit 0...
   3*0.01 + 2*0.01 + 1*0.01 + ... = 0.09
   [=========>              ] 9%
   ```
   - 进度条显示计算进度
   - 最终10个数字的得分用 ASCII bar chart 显示

4. **训练过程可视化**
   - 类似训练日志的输出
   ```
   $ ./train --epochs 100 --batch-size 32

   Epoch 1/100
   Loss: 2.3025 [#################---] 85%
   Epoch 2/100
   Loss: 1.9821 [##################--] 90%
   ```
   - 实时更新的损失曲线（用 ASCII 绘制）

5. **命令行式导航**
   - 章节用命令提示符标记
   ```
   $ cd /neural-network/layers
   $ ls
   convolution.layer  activation.layer  fully-connected.layer
   ```

### 3.3 沉浸式设计 - 终端会话体验

**核心隐喻**：用户正在一个终端会话中探索神经网络

**导航逻辑**：
- 垂直滚动为主，模拟终端输出不断往下滚动
- 每个章节就像执行了一个新命令
- 章节标题用命令提示符：
  ```
  $ ./mnist --explain convolution
  $ ./mnist --explain activation
  $ ./mnist --explain fully-connected
  ```

**滚动体验**：
- 文字逐行出现（像终端输出）
- 光标闪烁效果在当前阅读位置
- 进度指示器用终端风格：
  ```
  [###########---------] 55% (Layer 2/4)
  ```

**沉浸元素**：
- 首屏登录提示：
  ```
  Last login: Sat Dec 28 2025 on ttys001
  user@neural-network:~$ ./mnist_tutorial.sh
  Loading MNIST Neural Network Tutorial...
  ```
- 可选的扫描线效果（非常subtle，不影响阅读）
- 光标闪烁（在章节标题末尾）
- 偶尔的"命令执行"动画（例如 `Processing...` 带有旋转的 spinner）

### 3.4 响应式设计

**桌面端**：
- 终端窗口风格，固定宽度或最大宽度（模拟真实终端）
- ASCII 矩阵完整显示
- 更多终端特效（扫描线、光标闪烁）

**移动端**：
- 全屏终端体验
- ASCII 矩阵自适应缩小，但保持等宽字体对齐
- 触摸友好的"下一步"按钮（模拟按回车键）
- 简化扫描线等装饰效果，确保流畅性
- 字号适当调整，确保可读性

**关键断点**：
- Mobile: < 640px（字号 12-14px）
- Tablet: 640px - 1024px（字号 14px）
- Desktop: > 1024px（字号 14-16px）

**等宽字体的响应式处理**：
- 使用 `ch` 单位（字符宽度）来控制布局
- ASCII 艺术在小屏幕上可能需要简化（例如矩阵3x3而非5x5）

## 4. 技术实现

### 4.1 核心组件

1. **ConvolutionVisualizer** - 卷积层可视化
   - Canvas 或 SVG 绘制矩阵
   - Framer Motion 控制动画
   - 步进控制器（play/pause/step）

2. **ActivationFunctionChart** - 激活函数图表
   - Recharts 或 D3.js
   - 动画曲线绘制

3. **FullyConnectedCalculator** - 全连接层计算
   - 交互式矩阵组件
   - 实时计算显示

4. **TrainingVisualizer** - 训练过程可视化
   - 损失曲线动画
   - 梯度下降动画

5. **MatrixDisplay** - 可复用的矩阵显示组件
   - 支持高亮、动画
   - 响应式大小调整

6. **FormulaBlock** - 数学公式渲染
   - 使用 KaTeX 或 MathJax
   - 渐进式显示动画

### 4.2 依赖库

- **Framer Motion**: 动画库
- **Recharts**: 图表库（损失曲线）
- **KaTeX**: 数学公式渲染
- **Tailwind CSS**: 样式
- **React Spring** (可选): 更复杂的物理动画

### 4.3 性能考虑

- 矩阵动画使用 CSS transform（GPU 加速）
- Canvas 绘制优化（避免过度重绘）
- 懒加载复杂组件
- 移动端降低动画复杂度
- 使用 IntersectionObserver 控制动画触发

### 4.4 实现优先级

**Phase 1（MVP）**:
- 基础布局和样式
- 静态矩阵显示
- 基础的卷积层可视化（最核心）
- 公式渲染

**Phase 2**:
- 完整的交互式卷积演示
- 激活函数图表
- 全连接层计算器

**Phase 3（增强）**:
- 训练过程可视化
- 高级动画效果
- 粒子背景
- 声音反馈（可选）

## 5. 设计细节

### 5.1 矩阵展示规范
- 边框：1px 实线，霓虹蓝色
- 单元格：8x8px 到 16x16px（响应式）
- 数字字体：JetBrains Mono, 12-14px
- 高亮单元格：发光效果 + 背景色变化

### 5.2 动画时长
- 卷积滑动：每步 800ms
- 公式展开：300ms 每个元素
- 章节过渡：500ms
- 悬停反馈：150ms

### 5.3 配色使用规范

**文字配色**：
- 正文内容：#e5e7eb（浅灰白）
- 标题：#ffffff（纯白）
- 命令提示符 `$`：#50fa7b（绿）
- 注释/引用：#6272a4（暗灰）

**功能配色**：
- 矩阵边框：#8be9fd（青色）
- 矩阵内数值：#e5e7eb（浅灰白）
- 计算结果高亮：#f1fa8c（黄色）
- 按钮/交互元素：#50fa7b（绿色）

**语义配色**：
- 成功/完成：#50fa7b（绿）
- 警告/提示：#ffb86c（橙）
- 错误：#ff5555（红）
- 进度条填充：#50fa7b（绿）

**示例**：
```
$ ./convolution --input digit7.png        # 绿色提示符，白色命令

计算过程：                                 # 白色正文
┌───┬───┬───┐                            # 青色边框
│ 1 │ 1 │ 1 │                            # 白色数值
├───┼───┼───┤
│ 0 │ 0 │ 1 │
└───┴───┴───┘

结果: 3                                   # 黄色高亮结果
# 这是一个注释                            # 暗灰色注释
```

## 6. 内容组织 - 终端会话流程

**Hero 区域**（登录界面）：
```
Last login: Sat Dec 28 2025 on ttys001

 __  __ _   _ ___ ____ _____
|  \/  | \ | |_ _/ ___|_   _|
| |\/| |  \| || |\___ \ | |
| |  | | |\  || | ___) || |
|_|  |_|_| \_|___|____/ |_|

Neural Network from Scratch

user@neural-network:~$ ./mnist_tutorial.sh
Initializing tutorial...
[####################] 100%
Ready.

Type 'help' for available commands.
```

**章节结构**（命令式导航）：
```
$ ./mnist --overview
  > 显示大纲概览

$ ./mnist --explain convolution
  > 卷积层详解（交互重点）

$ ./mnist --explain activation
  > 激活函数层详解

$ ./mnist --explain fully-connected
  > 全连接层详解

$ ./mnist --explain training
  > 训练过程详解

$ ./mnist --summary
  > 总结
```

**结尾**：
```
$ exit
Tutorial completed.
Logout

[Process completed]
```

## 7. 为什么选择现代终端风格

**阅读体验优先** - 白色主文字确保长时间阅读的舒适性，深色背景减少眼睛疲劳，色彩用于功能区分而非装饰

**技术认同感** - 目标读者（对 ML 感兴趣的开发者）熟悉这种现代终端配色（VS Code、iTerm2），感到亲切和专业

**隐喻贴切** - 神经网络训练本质上就是在"运行程序"，终端是最直观的隐喻

**美学一致** - 等宽字体天然适合展示矩阵和数学公式，Unicode 边框能精确表达计算结构

**沉浸感强** - 命令行会话的形式让读者感觉在"操作"和"调试"神经网络，而不只是"阅读"教程

**功能性配色** - 用颜色区分内容类型（命令、结果、注释），不是为了炫酷，而是为了提升理解效率

**专业且友好** - 不是复古的绿色终端，而是现代开发者每天使用的工具风格，既 Geek 又实用

**响应式友好** - 等宽字体的特性使得在不同屏幕上都能保持对齐，ASCII/Unicode 艺术可伸缩
